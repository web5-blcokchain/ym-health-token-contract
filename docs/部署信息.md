# HealthToken 项目部署信息

## 📋 合约地址 (BSC 测试网)

### 已部署合约

| 合约名称 | 地址 | BSCScan 链接 |
|---------|------|-------------|
| MockUSDT | `0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B` | [查看合约](https://testnet.bscscan.com/address/0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B) |
| HLTToken | `0xB9345Bfe74aC71D2C1bE0212F5bff3F67cB85ba4` | [查看合约](https://testnet.bscscan.com/address/0xB9345Bfe74aC71D2C1bE0212F5bff3F67cB85ba4) |
| Crowdsale | `0x32135980bB2468DbF4e53786148eA0C000F8Fdef` | [查看合约](https://testnet.bscscan.com/address/0x32135980bB2468DbF4e53786148eA0C000F8Fdef) |

### 合约配置信息

- **网络**: BSC 测试网 (Chain ID: 97)
- **代币兑换比例**: 1 USDT = 12 HLT
- **MockUSDT 总供应量**: 1,000,000 USDT
- **HLT 总供应量**: 100,000,000 HLT
- **众筹合约代币余额**: 23,999,999.9999999988 HLT

## 🚀 常用脚本命令

### 部署相关

```bash
# 部署 MockUSDT (已部署，无需重复执行)
npx hardhat run scripts/deploy-mockusdt-bsc-testnet.js --network bscTestnet

# 部署主合约 (HLTToken + Crowdsale)
npx hardhat run scripts/deploy-bsc-testnet-simple.js --network bscTestnet
```

### 测试相关

```bash
# 运行 BSC 测试网集成测试
npx hardhat run scripts/integration-test-bsc.js --network bscTestnet

# 运行单元测试
npx hardhat test

# 运行特定测试文件
npx hardhat test test/HLTToken.test.js
npx hardhat test test/Crowdsale.test.js
```

### MockUSDT 管理

#### 🪙 铸造 MockUSDT 代币

**方式一：简化版本 (推荐)**
```bash
# 直接运行，使用脚本内置地址和数量
npx hardhat run scripts/mint-mockusdt-simple.js --network bscTestnet
```

**方式二：环境变量配置**
```bash
# 设置环境变量后运行
MOCKUSDT_ADDRESS=0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B \
RECIPIENT_ADDRESS=0xcc76a9BeEf0dF6F0ccD29515588c245F98744351 \
MINT_AMOUNT=10000000 \
npx hardhat run scripts/mint-mockusdt.js --network bscTestnet
```

**方式三：批量铸造**
```bash
# 批量给多个地址铸造代币
npx hardhat run scripts/mint-mockusdt.js --network bscTestnet --batch
```

#### 📋 Mint 参数说明

- **MOCKUSDT_ADDRESS**: MockUSDT 合约地址 (`0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B`)
- **RECIPIENT_ADDRESS**: 接收代币的地址
- **MINT_AMOUNT**: 铸造数量 (单位: USDT，支持小数)

#### 🌐 多网络支持

```bash
# BSC 测试网 (当前部署)
npx hardhat run scripts/mint-mockusdt-simple.js --network bscTestnet

# BSC 主网 (需要重新部署 MockUSDT)
npx hardhat run scripts/mint-mockusdt-simple.js --network bscMainnet

# 以太坊 Sepolia 测试网 (需要重新部署 MockUSDT)
npx hardhat run scripts/mint-mockusdt-simple.js --network sepolia

# 以太坊 Goerli 测试网 (需要重新部署 MockUSDT)
npx hardhat run scripts/mint-mockusdt-simple.js --network goerli
```

#### ⚠️ 注意事项

1. **权限要求**: 只有 MockUSDT 合约的 owner 才能执行 mint 操作
2. **网络切换**: 切换网络时需要确保该网络上已部署 MockUSDT 合约
3. **Gas 费用**: 确保账户有足够的原生代币支付 Gas 费用
4. **地址格式**: 所有地址必须是有效的以太坊地址格式

### 合约验证

```bash
# 验证 HLTToken 合约
npx hardhat verify --network bscTestnet 0xB9345Bfe74aC71D2C1bE0212F5bff3F67cB85ba4 "HealthLife Token" "HLT" 0x68eb4FA243bB04909e3Aa4F1e5186556ccd122a2 0x620bdC24abCf45F8Ea1D99fEF2EC5Aae7CD300A7

# 验证 Crowdsale 合约
npx hardhat verify --network bscTestnet 0x32135980bB2468DbF4e53786148eA0C000F8Fdef 0xB9345Bfe74aC71D2C1bE0212F5bff3F67cB85ba4 0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B 12

# 验证 MockUSDT 合约
npx hardhat verify --network bscTestnet 0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B
```

### 网络配置

```bash
# 检查网络连接
npx hardhat run --network bscTestnet scripts/integration-test-bsc.js

# 查看账户余额
npx hardhat console --network bscTestnet
```

## 📝 环境配置

### 必需的环境变量 (.env)

```bash
# 私钥配置
PRIVATE_KEY=your_private_key_here

# BSC 网络配置
BSC_TESTNET_URL=https://data-seed-prebsc-1-s1.binance.org:8545/

# BSCScan API 密钥 (用于合约验证)
BSCSCAN_API_KEY=your_bscscan_api_key_here

# 部署配置
OWNER_ADDRESS=0x68eb4FA243bB04909e3Aa4F1e5186556ccd122a2
OTHER_ACCOUNT_ADDRESS=0x620bdC24abCf45F8Ea1D99fEF2EC5Aae7CD300A7
```

## 🔧 开发工具

### 安装依赖

```bash
npm install
```

### 编译合约

```bash
npx hardhat compile
```

### 清理编译缓存

```bash
npx hardhat clean
```

## 🌍 多网络部署指南

### 支持的网络

| 网络 | Chain ID | RPC URL | 浏览器 | 状态 |
|------|----------|---------|--------|------|
| BSC 测试网 | 97 | https://data-seed-prebsc-1-s1.binance.org:8545/ | https://testnet.bscscan.com | ✅ 已部署 |
| BSC 主网 | 56 | https://bsc-dataseed.binance.org/ | https://bscscan.com | ⏳ 待部署 |
| Ethereum Sepolia | 11155111 | https://sepolia.infura.io/v3/your_project_id | https://sepolia.etherscan.io | ⏳ 待部署 |
| Ethereum Goerli | 5 | https://goerli.infura.io/v3/your_project_id | https://goerli.etherscan.io | ⏳ 待部署 |
| Ethereum 主网 | 1 | https://mainnet.infura.io/v3/your_project_id | https://etherscan.io | ⏳ 待部署 |

### 新网络部署步骤

1. **配置网络环境**
   ```bash
   # 更新 .env 文件，添加对应网络的 RPC URL
   SEPOLIA_URL=https://sepolia.infura.io/v3/your_project_id
   GOERLI_URL=https://goerli.infura.io/v3/your_project_id
   ```

2. **部署 MockUSDT**
   ```bash
   # 部署到新网络
   npx hardhat run scripts/deploy-mockusdt-bsc-testnet.js --network sepolia
   ```

3. **更新部署脚本**
   ```bash
   # 修改 deploy-bsc-testnet-simple.js 中的 usdtAddress
   # 然后部署主合约
   npx hardhat run scripts/deploy-bsc-testnet-simple.js --network sepolia
   ```

4. **运行测试**
   ```bash
   # 运行集成测试验证部署
   npx hardhat run scripts/integration-test-bsc.js --network sepolia
   ```

### 网络切换注意事项

- **Gas 费用**: 不同网络的 Gas 费用差异很大
- **确认时间**: 主网确认时间较长，测试网较快
- **代币水龙头**: 测试网需要从水龙头获取测试代币
- **API 密钥**: 不同网络可能需要不同的区块浏览器 API 密钥

## 📊 项目状态

### BSC 测试网 (当前)
- ✅ MockUSDT 合约已部署
- ✅ HLTToken 合约已部署
- ✅ Crowdsale 合约已部署
- ✅ 集成测试通过
- ✅ 代币购买功能正常
- ✅ 锁仓机制正常
- ✅ 统计功能正常

### 其他网络
- ⏳ 待部署到其他网络

## 📞 技术支持

如有问题，请参考:
- [前端集成指南](./FRONTEND_INTEGRATION.md)
- [项目 README](../README.md)
- BSC 测试网水龙头: https://testnet.binance.org/faucet-smart


## 🆕 新增部署记录（BSC 测试网，LockVault 架构）

- 网络: BSC Testnet (ChainId: 97)
- 部署组件: HLTToken, Crowdsale, LockVault（使用既有 USDT）
- USDT（支付代币）地址: `0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B`

### 合约地址

| 合约名称 | 地址 | BSCScan 链接 |
|---------|------|---------------|
| HLTToken | `0xe80D3Cd913b4Ff5c010cD1d014c83f4Aa5Fe3Ee0` | https://testnet.bscscan.com/address/0xe80D3Cd913b4Ff5c010cD1d014c83f4Aa5Fe3Ee0 |
| Crowdsale | `0x0eD62a3c7a5c9C350B7BBfc481C7619b54024533` | https://testnet.bscscan.com/address/0x0eD62a3c7a5c9C350B7BBfc481C7619b54024533 |
| LockVault | `0x67Ff1823C1a0fbe9ee38935AeF15100564061646` | https://testnet.bscscan.com/address/0x67Ff1823C1a0fbe9ee38935AeF15100564061646 |
| USDT (已部署) | `0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B` | https://testnet.bscscan.com/address/0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B |

### 关键配置

- Crowdsale ↔ LockVault 已双向绑定
- HLTToken 已设置 Crowdsale 合约地址并划拨售卖额度（2400 万 HLT）
- 7600 万 HLT 已转移至 OTHER_ACCOUNT_ADDRESS：`0xEb88e4aaFDBb84E1e7F89bD333E526F829e737a4`
- 部署者/Owner：`0x68eb4FA243bB04909e3Aa4F1e5186556ccd122a2`

### 合约验证命令（BSCScan）

```bash
npx hardhat verify --network bscTestnet 0xe80D3Cd913b4Ff5c010cD1d014c83f4Aa5Fe3Ee0 "HealthLife Token" "HLT" 0x68eb4FA243bB04909e3Aa4F1e5186556ccd122a2 0xEb88e4aaFDBb84E1e7F89bD333E526F829e737a4
npx hardhat verify --network bscTestnet 0x0eD62a3c7a5c9C350B7BBfc481C7619b54024533 0xe80D3Cd913b4Ff5c010cD1d014c83f4Aa5Fe3Ee0 0xeb4C53574edBF035FfBAF647b3E957b4FB88CD6B 0x68eb4FA243bB04909e3Aa4F1e5186556ccd122a2
npx hardhat verify --network bscTestnet 0x67Ff1823C1a0fbe9ee38935AeF15100564061646 0xe80D3Cd913b4Ff5c010cD1d014c83f4Aa5Fe3Ee0 0x68eb4FA243bB04909e3Aa4F1e5186556ccd122a2
```

### 下一步

1) 使用 BSCScan API Key 执行上面的验证命令（或将 API Key 配置到 .env）
2) 调用 Crowdsale.startCrowdsale() 开始众筹
3) 前端通过 Crowdsale.vault() 获取 LockVault 地址，进行锁仓查询与领取对接